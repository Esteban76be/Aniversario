<script type="text/javascript">
        var gk_isXlsx = false;
        var gk_xlsxFileLookup = {};
        var gk_fileData = {};
        function filledCell(cell) {
          return cell !== '' && cell != null;
        }
        function loadFileData(filename) {
        if (gk_isXlsx && gk_xlsxFileLookup[filename]) {
            try {
                var workbook = XLSX.read(gk_fileData[filename], { type: 'base64' });
                var firstSheetName = workbook.SheetNames[0];
                var worksheet = workbook.Sheets[firstSheetName];

                // Convert sheet to JSON to filter blank rows
                var jsonData = XLSX.utils.sheet_to_json(worksheet, { header: 1, blankrows: false, defval: '' });
                // Filter out blank rows (rows where all cells are empty, null, or undefined)
                var filteredData = jsonData.filter(row => row.some(filledCell));

                // Heuristic to find the header row by ignoring rows with fewer filled cells than the next row
                var headerRowIndex = filteredData.findIndex((row, index) =>
                  row.filter(filledCell).length >= filteredData[index + 1]?.filter(filledCell).length
                );
                // Fallback
                if (headerRowIndex === -1 || headerRowIndex > 25) {
                  headerRowIndex = 0;
                }

                // Convert filtered JSON back to CSV
                var csv = XLSX.utils.aoa_to_sheet(filteredData.slice(headerRowIndex)); // Create a new sheet from filtered array of arrays
                csv = XLSX.utils.sheet_to_csv(csv, { header: 1 });
                return csv;
            } catch (e) {
                console.error(e);
                return "";
            }
        }
        return gk_fileData[filename] || "";
        }
        </script><!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mi Cielo, Mi Amor</title>
  <style>
    body {
      margin: 0;
      height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      background: linear-gradient(180deg, #2c1b47, #4a2e6b);
      font-family: 'Georgia', serif;
      color: #fff;
      overflow: hidden;
    }
    canvas {
      position: absolute;
      top: 0;
      left: 0;
      z-index: 1;
    }
    h1 {
      font-size: 2.8em;
      text-align: center;
      color: #f4c4f3;
      z-index: 2;
      animation: fadeIn 2s ease-in;
      margin-top: 30px;
    }
    .message {
      font-size: 1.4em;
      text-align: center;
      max-width: 90vw;
      margin: 40px 20px 40px;
      z-index: 2;
      opacity: 0;
      transition: opacity 1s;
    }
    .buttons-container {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-top: 20px;
    }
    button {
      padding: 12px 24px;
      font-size: 1.2em;
      background-color: #f4c4f3;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      z-index: 2;
      transition: transform 0.3s, background-color 0.3s;
    }
    button:hover {
      background-color: #e0a4e3;
      transform: scale(1.1);
    }
    .letter {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: #f4c4f3;
      padding: 30px;
      border-radius: 10px;
      box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);
      max-width: 80vw;
      z-index: 3;
      color: #333;
      font-size: 1.2em;
      text-align: center;
    }
    .letter p {
      opacity: 0;
      transition: opacity 1s;
      margin: 10px 0;
    }
    .petal {
      position: absolute;
      width: 10px;
      height: 10px;
      background: #ff8ab5;
      clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%);
      z-index: 2;
    }
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    @keyframes fall {
      0% { transform: translateY(-100vh) rotate(0deg); }
      100% { transform: translateY(100vh) rotate(360deg); }
    }
    @keyframes glow {
      0% { transform: scale(1); opacity: 0.4; }
      50% { transform: scale(1.8); opacity: 0.7; }
      100% { transform: scale(1); opacity: 0.4; }
    }
    @keyframes fireGlow {
      0% { box-shadow: 0 0 10px #d8b2ff; }
      50% { box-shadow: 0 0 20px #d8b2ff; }
      100% { box-shadow: 0 0 10px #d8b2ff; }
    }
    @media (max-width: 600px) {
      h1 {
        font-size: 2em;
      }
      .message {
        font-size: 1em;
        margin: 20px 10px 20px;
      }
      .buttons-container {
        flex-direction: column;
        gap: 10px;
      }
      button {
        padding: 10px 20px;
        font-size: 1em;
      }
      .letter {
        padding: 20px;
        font-size: 1em;
      }
      .petal {
        width: 8px;
        height: 8px;
      }
      @keyframes fireGlow {
        0% { box-shadow: 0 0 8px #d8b2ff; }
        50% { box-shadow: 0 0 15px #d8b2ff; }
        100% { box-shadow: 0 0 8px #d8b2ff; }
      }
    }
  </style>
</head>
<body>
  <canvas id="canvas"></canvas>
  <h1>Mi Cielo, Mi Amor</h1>
  <button id="startBtn" onclick="startAnimation()">Toca nuestro cielo ðŸ’–</button>
  <div id="message" class="message"></div>
  <div id="letter" class="letter">
    <h2>Una carta para ti</h2>
    <p id="line1"></p>
    <p id="line2"></p>
    <p id="line3"></p>
    <p id="line4"></p>
    <p id="line5"></p>
    <button onclick="closeLetter()">Cerrar</button>
  </div>
  <script>
    // Declarar variables al inicio
    let backgroundStars = [];
    let heartStars = [];
    let shootingStar = null;
    let fireParticles = [];
    let animationStarted = false;

    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');

    // Ajustar canvas al tamaÃ±o de la ventana
    function resizeCanvas() {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
      createBackgroundStars();
      if (animationStarted) formHeart();
    }
    window.addEventListener('resize', resizeCanvas);
    resizeCanvas();

    // Crear estrellas de fondo
    function createBackgroundStars() {
      backgroundStars = [];
      for (let i = 0; i < 150; i++) {
        backgroundStars.push({
          x: Math.random() * canvas.width,
          y: Math.random() * canvas.height,
          radius: Math.random() * 2 + 1,
          alpha: Math.random(),
          speed: Math.random() * 0.02 + 0.01
        });
      }
    }

    // Animar estrellas de fondo
    function animateBackgroundStars() {
      backgroundStars.forEach(star => {
        star.alpha += star.speed;
        if (star.alpha > 1 || star.alpha < 0) star.speed = -star.speed;
      });
    }

    // Formar un corazÃ³n con iniciales
    function formHeart() {
      const heartPoints = [];
      const centerX = canvas.width / 2;
      const centerY = canvas.height / 2 + Math.min(canvas.height * 0.3, 200);
      const scale = canvas.width < 600 ? 12 : 18;
      for (let t = 0; t < Math.PI * 2; t += 0.1) {
        const x = centerX + scale * Math.pow(Math.sin(t), 3);
        const y = centerY - 13 * Math.cos(t) + 5 * Math.cos(2 * t) + 2 * Math.cos(3 * t) + Math.cos(4 * t);
        heartPoints.push({ x, y });
      }
      heartPoints.push({ x: centerX - 30, y: centerY, letter: 'E' });
      heartPoints.push({ x: centerX + 30, y: centerY, letter: 'K' });
      heartStars = heartPoints.map((point, i) => ({
        x: point.x,
        y: point.y,
        radius: point.letter ? 5 : 2,
        alpha: 1,
        letter: point.letter || null,
        glow: Math.random()
      }));
    }

    // Clase para partÃ­culas de fuego
    class FireParticle {
      constructor(x, y) {
        this.x = x;
        this.y = y;
        this.vx = (Math.random() * 2 - 1) - 2;
        this.vy = (Math.random() * 2 - 1) - 2;
        this.radius = canvas.width < 600 ? Math.random() * 4 + 3 : Math.random() * 6 + 4;
        this.life = 1;
        this.color = `rgba(255, ${Math.round(Math.random() * 100 + 155)}, 0, ${this.life})`;
      }

      update() {
        this.x += this.vx;
        this.y += this.vy;
        this.life -= 0.025;
        this.color = `rgba(255, ${Math.round(Math.random() * 100 + 155)}, 0, ${this.life})`;
        return this.life > 0;
      }

      draw() {
        ctx.beginPath();
        ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
        ctx.fillStyle = this.color;
        ctx.shadowBlur = canvas.width < 600 ? 10 : 15;
        ctx.shadowColor = '#ff4500';
        ctx.fill();
      }
    }

    // Dibujar escena
    function drawScene() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      // Dibujar estrellas de fondo
      backgroundStars.forEach(star => {
        ctx.beginPath();
        ctx.arc(star.x, star.y, star.radius, 0, Math.PI * 2);
        ctx.fillStyle = `rgba(255, 255, 255, ${star.alpha})`;
        ctx.shadowBlur = 5 * Math.sin(Date.now() * 0.001);
        ctx.shadowColor = '#ffffff';
        ctx.fill();
      });
      ctx.shadowBlur = 0;

      // Dibujar corazÃ³n
      if (animationStarted) {
        const glowIntensity = 1 + Math.sin(Date.now() * 0.001) * 0.5;
        heartStars.forEach(star => {
          ctx.beginPath();
          if (star.letter) {
            ctx.font = canvas.width < 600 ? '18px Georgia' : '24px Georgia';
            ctx.fillStyle = 'rgba(255, 255, 255, 1)';
            ctx.fillText(star.letter, star.x - 10, star.y + 5);
          } else {
            ctx.arc(star.x, star.y, star.radius * glowIntensity, 0, Math.PI * 2);
            ctx.fillStyle = 'rgba(255, 255, 255, 1)';
            ctx.shadowBlur = 15 * glowIntensity;
            ctx.shadowColor = '#ff69b4';
            ctx.fill();
          }
        });
        ctx.shadowBlur = 0;
      }

      // Dibujar estrella fugaz
      if (shootingStar) {
        // NÃºcleo brillante
        ctx.beginPath();
        ctx.arc(shootingStar.x, shootingStar.y, shootingStar.radius, 0, Math.PI * 2);
        ctx.fillStyle = shootingStar.color;
        ctx.shadowBlur = canvas.width < 600 ? 25 : 40;
        ctx.shadowColor = '#ffd700';
        ctx.fill();

        // Halo pulsante
        const haloSize = shootingStar.radius * 4 * (1 + Math.sin(Date.now() * 0.002) * 0.5);
        ctx.beginPath();
        ctx.arc(shootingStar.x, shootingStar.y, haloSize, 0, Math.PI * 2);
        ctx.fillStyle = `rgba(255, 245, 200, ${shootingStar.glowAlpha})`;
        ctx.fill();

        // Cola larga con reflejo
        ctx.beginPath();
        ctx.moveTo(shootingStar.x, shootingStar.y);
        for (let i = 1; i <= 15; i++) {
          const tailX = shootingStar.x - i * 35 * shootingStar.vx / shootingStar.speed;
          const tailY = shootingStar.y - i * 35 * shootingStar.vy / shootingStar.speed;
          ctx.lineTo(tailX, tailY);
          ctx.strokeStyle = `rgba(255, 165, 0, ${shootingStar.alpha / (i * 0.4)})`;
          ctx.lineWidth = canvas.width < 600 ? 8 / i : 12 / i;
          ctx.stroke();
          ctx.beginPath();
          ctx.moveTo(tailX, tailY);
        }

        // PartÃ­culas de fuego
        if (fireParticles.length < (canvas.width < 600 ? 100 : 200)) {
          fireParticles.push(new FireParticle(shootingStar.x, shootingStar.y));
        }
        for (let i = fireParticles.length - 1; i >= 0; i--) {
          if (fireParticles[i].update()) {
            fireParticles[i].draw();
          } else {
            fireParticles.splice(i, 1);
          }
        }

        ctx.shadowBlur = 0;

        // Actualizar posiciÃ³n y brillo
        shootingStar.x += shootingStar.vx;
        shootingStar.y += shootingStar.vy;
        shootingStar.glowAlpha = 0.5 + Math.sin(Date.now() * 0.001) * 0.4;
        shootingStar.alpha -= 0.0015;
        if (shootingStar.alpha <= 0 || shootingStar.y > canvas.height || shootingStar.x > canvas.width) {
          shootingStar = null;
          fireParticles = [];
        }
      }

      requestAnimationFrame(drawScene);
    }

    // Escribir mensaje inicial
    function typeMessage() {
      const message = "Bueno mi Pandicornia hermosa, gracias por estar acompaÃ±andome estos 365 dÃ­as y dandome felicidad y tambiÃ©n en ocasiones dolores de cabeza, Te amo mi bebÃ©";
      const messageDiv = document.getElementById('message');
      messageDiv.style.opacity = 1;
      let i = 0;
      function type() {
        if (i < message.length) {
          messageDiv.innerHTML += message.charAt(i);
          i++;
          setTimeout(type, 40);
        } else {
          const buttonsContainer = document.createElement('div');
          buttonsContainer.className = 'buttons-container';
          const letterBtn = document.createElement('button');
          letterBtn.innerText = 'Lee mi carta ðŸ’Œ';
          letterBtn.onclick = showLetter;
          buttonsContainer.appendChild(letterBtn);
          const wishBtn = document.createElement('button');
          wishBtn.innerText = 'Pide un deseo para ambos ðŸŒ ';
          wishBtn.onclick = sendWish;
          buttonsContainer.appendChild(wishBtn);
          messageDiv.appendChild(buttonsContainer);
        }
      }
      type();
    }

    // Mostrar carta con poema
    function showLetter() {
      document.getElementById('letter').style.display = 'block';
      document.getElementById('letter').style.animation = 'fireGlow 1.5s infinite';
      const lines = [
        "Holaaaaaaaaaaa mi amor, espero te guste mi regalo, siempre intento darte cositas distintas y novedosas,",
        "no me gusta repetir ideas ajajjaja, pero la cartita no puede faltar,",
        "quisiera aprovechar para recordarte lo importate que eres para mi,",
        "que realmente eres un ser muy valioso en mi vida y que cuento los minutos y segundos para poder estar a tu ladito y lamerte el rostro,",
        "te amo mi niÃ±a hermosa. PD: Come bien UwU"
      ];
      let i = 0;
      function revealLine() {
        if (i < lines.length) {
          const line = document.getElementById(`line${i + 1}`);
          line.innerText = lines[i];
          line.style.opacity = 1;
          i++;
          setTimeout(revealLine, 1000);
        }
      }
      revealLine();
      createPetals();
    }

    // Crear pÃ©talos
    function createPetals() {
      for (let i = 0; i < 30; i++) {
        const petal = document.createElement('div');
        petal.className = 'petal';
        petal.style.left = Math.random() * 100 + 'vw';
        petal.style.animation = `fall ${Math.random() * 5 + 5}s linear infinite`;
        petal.style.animationDelay = `${Math.random() * 5}s`;
        petal.style.boxShadow = '0 0 5px #ff69b4';
        document.body.appendChild(petal);
      }
    }

    // Enviar deseo - Estrella fugaz
    function sendWish() {
      if (!shootingStar) {
        const speed = 1.5;
        shootingStar = {
          x: canvas.width * 0.1,
          y: canvas.height * 0.1,
          vx: (canvas.width * 0.8) / (7 * 60),
          vy: (canvas.height * 0.8) / (7 * 60),
          radius: canvas.width < 600 ? 10 : 16,
          alpha: 1,
          glowAlpha: 0.5,
          speed: speed,
          color: 'rgb(255, 215, 0)',
          colorRgb: '255, 215, 0'
        };
      }
    }

    function closeLetter() {
      document.getElementById('letter').style.display = 'none';
      document.getElementById('letter').style.animation = '';
    }

    function startAnimation() {
      animationStarted = true;
      formHeart();
      typeMessage();
      document.getElementById('startBtn').style.display = 'none';
    }

    // Iniciar animaciÃ³n
    requestAnimationFrame(drawScene);
  </script>
</body>
</html>